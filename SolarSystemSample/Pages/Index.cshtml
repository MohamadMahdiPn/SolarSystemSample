@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="page">
    <div class="solar-wrapper">
        <div class="solar-system" id="solarRoot">
            <!-- با JS پر میشه -->
        </div>
    </div>

    <div class="info-panel">
        <div>
            <div class="info-title">منظومه از دیتابیس 🌌</div>
            <div class="info-subtitle">دیتا از EF Core لود شده و با JS نمایش داده می‌شود.</div>
        </div>

        <div class="info-box">
            <h2 id="infoName">یک جرم را انتخاب کن</h2>
            <p id="infoDesc">روی خورشید، سیاره یا قمرها کلیک کن تا جزئیاتشان نمایش داده شود.</p>

            <div class="info-grid" id="infoGrid" style="display:none;">
                <div class="info-label">نوع:</div>
                <div class="info-value" id="infoType"></div>

                <div class="info-label">فاصله:</div>
                <div class="info-value" id="infoDistance"></div>

                <div class="info-label">دوره مداری / سال:</div>
                <div class="info-value" id="infoYear"></div>

                <div class="info-label">چرخش / روز:</div>
                <div class="info-value" id="infoDay"></div>
            </div>
        </div>

        <div class="hint">
            🧠 این صفحه داره مدل‌های EF (SolarSystem/Planet/Moon) رو می‌خونه و تبدیل به JSON می‌کنه.
        </div>
    </div>
</div>

                
@section Scripts {

    <script>
        // JSON ارسالی از سرور → تبدیل به object
        const systemConfig = @Html.Raw(Model.SolarSystemJson ?? "{}");

        // پیدا کردن ریشه و المنت‌های info
        const rootEl = document.getElementById("solarRoot");
        const infoUI = {
            nameEl: document.getElementById("infoName"),
            descEl: document.getElementById("infoDesc"),
            typeEl: document.getElementById("infoType"),
            distanceEl: document.getElementById("infoDistance"),
            yearEl: document.getElementById("infoYear"),
            dayEl: document.getElementById("infoDay"),
            gridEl: document.getElementById("infoGrid")
        };

        // فرض بر اینه که در solar-system.js کلاسی مثل این داری:
        // class SolarSystemRenderer { constructor(config, root, infoUI) { ... } ... }

        document.addEventListener("DOMContentLoaded", () => {
            if (!systemConfig || !systemConfig.planets) {
                console.error("No systemConfig from server");
                return;
            }

            const renderer = new SolarSystemRenderer(systemConfig, rootEl, infoUI);
            renderer.init();
        });
    </script>
}